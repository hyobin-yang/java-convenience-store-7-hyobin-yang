## TDD PROCESS

- TDD 적용 과정을 나타낸 표이다.
- 테스트 코드를 작성한 후에는 해당 클래스를 구현하고 테스트를 실행하여 구현이 잘 되었는지 확인한다.
- 테스트만을 위해 프로덕션 코드를 바꾸지 않는다.
  - 테스트를 위해 접근 제어자를 열지 않는다.
  - 테스트를 편히 하기 위해 static 메서드를 남용하지 않는다.
  - 테스트를 위해 파라미터나 반환값을 불필요하게 변경하지 않는다.

<br>

| **테스트 요약**                         | **테스트 메서드**                                                      | **테스트 내용**                                                                                                                                                                                                                      |
|------------------------------------|------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 멤버십 할인 테스트                         | `MembershipPolicy.discountPrice`  <br> 반환값: int                  | 30%의 할인 적용 확인, 멤버십 할인 8,000원 제한 확인, 음수 입력 시 예외 발생 확인                                                                                                                                                                            |
| 대답(Y/N) 입력값 검증 테스트                 | `AnswerValidator.validateAnswer`   <br> 반환값: boolean             | 입력값이 Y, N, y, n 중 하나인지 검사. 아니라면 예외 발생. 단 공백은 포함 가능                                                                                                                                                                              |
| 구매할 상품 입력값 파싱 테스트<br>입력 예시: [사이다-2] | `BuyItemInputParser.parseEachItem` <br> 반환값: Map<String, Integer> | 상품명과 수량이 대괄호 안에 있는지 확인 <br> 상품명과 수량이 하이픈(-)으로 연결되어 각각 입력되는지 확인 <br> 상품명은 대괄호나 하이픈을 제외한 모든 문자 가능  <br> 수량이 1이상의 정수인지 확인 <br> 조건 미충족 시 예외 발생 확인 <br> 각 요소 간의 공백은 허용                                                               | 
| 쉼표 파싱 테스트                          | `ParserWithComma` <br> 반환값: List<String>                         | 구분자인 쉼표(,)로 잘 파싱되는지 확인 <br> 입력값이 없을 시 예외 발생 <br> 리스트에 추가할 때는 양 끝 공백 제거 후 추가                                                                                                                                                     | 
| 문자열 숫자 변환 테스트                      | `NumberConverter` <br> 반환값: int                                  | 정수로 변환 가능한 올바른 문자열 값이 들어왔을 시 정수로 변환해서 반환 <br> 공백 포함, 문자 포함, 소수 입력 시 예외 발생                                                                                                                                                       | 
| 프로모션 기간 확인 테스트                     | `Promotion.isTodayWithinPromotionPeriod` <br> 반환값: boolean       | 설정한 오늘 날짜가 프로모션 전, 후일 경우 false, 프로모션 기간 내일 경우 true 반환 확인                                                                                                                                                                        | 
| 아이템 추가 테스트                         | `ItemInventory.addItem`                                          | 생성한 Item 객체가 ItemInventory에 정상적으로 추가되는지 확인 <br> 한 아이템에 여러 프로모션을 적용하지 않는지 확인 <br> 동일한 아이템을 추가하려고 할 때 예외를 발생시키는지 확인                                                                                                               | 
| 아이템 생성 테스트                         | `Item 생성자`                                                       | 가격과 수량이 0 이하인 경우 예외가 발생하여 아이템 객체가 생성되지 않음을 확인                                                                                                                                                                                   | 
| 프로모션 컨트롤러 테스트                      | `PromotionController` <br> 반환값: PromotionDTO                     | 프로모션 관련 작동 확인 <br> 프로모션 수량 부족 시에도 정상 작동 확인 <br> 증정 상품 추가 시 구매 수량 증가 확인 <br> 수량 부족 시 예외 확인 <br> 구매 취소 시 예외 확인                                                                                                                    | 
| 대답(Y/N) 입력값 검증 테스트 수정              | `YesNoAnswer.validate`, `YesNoAnswer.isPositive`                 | 클래스명 변경, 반환값 변경에 따른 테스트 코드 수정                                                                                                                                                                                                   |
| 출력값 테스트                            | `OutputView.outputItemStock`                                     | 상품 정보가 올바르게 출력되는지 확인, 가격은 1000 단위로 쉼표(,)가 붙어 출력되는지 확인, 출력값 캡쳐하는 ByteArrayOutputStream 이용                                                                                                                                        |
| 영수증 출력 테스트                         | `ApplicationTest` 테스트 케이스 추가                                     | 여러 개의 일반 상품 구매 테스트 추가, 프로모션 상품 구매 테스트 추가                                                                                                                                                                                        |
|                                    |                                                                  | 프로모션이 적용되는 상품의 총 금액을 제외한 금액에 멤버십 할인이 적용되는가 <br> 멤버십 할인을 받지 않겠다고 답할 때 멤버십 할인 금액은 0이 되는가    <br> 프로모션 적용이 되지 않는 상품은 구매하지 않는다고 답할 경우 그 상품 재고를 제외한 수량을 정상적으로 결제하는가 <br> 프로모션 할인 금액이 정상적으로 출력되는가 <br> 최종 '내실돈'은 프로모션 할인과 멤버십 할인 금액을 뺀 값이 정상적으로 출력되는가 |
| 대답(Y/N) 입력값 검증 테스트 수정              | `YesNoAnswerValidator`                          | static 메서드로 선언함에 따라 테스트 코드 변경                                                                                                                                                                                                   |


